# Migration `20201227195638-add-subject-access-request-table`

This migration has been generated by Kurt Hutten at 12/28/2020, 6:56:38 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "SubjectAccessRequest" (
    "id" TEXT NOT NULL,
    "comment" TEXT NOT NULL,
    "payload" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201213004819-add-delete-on-part..20201227195638-add-subject-access-request-table
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = ["sqlite", "postgresql"]
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -30,13 +30,14 @@
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-  image    String? // url maybe id or file storage service? cloudinary?
-  bio      String? //mark down
-  Part     Part[]
-  Reaction PartReaction[]
-  Comment  Comment[]
+  image                String? // url maybe id or file storage service? cloudinary?
+  bio                  String? //mark down
+  Part                 Part[]
+  Reaction             PartReaction[]
+  Comment              Comment[]
+  SubjectAccessRequest SubjectAccessRequest[]
 }
 model Part {
   id          String   @id @default(uuid())
@@ -78,4 +79,15 @@
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
+
+model SubjectAccessRequest {
+  id      String @id @default(uuid())
+  comment String
+  payload String // json dump
+  user    User   @relation(fields: [userId], references: [id])
+  userId  String
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
```


